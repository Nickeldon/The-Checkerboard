<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        @font-face { font-family: PixelifySans; src: url('./Addons/PixelifySans.ttf');}
    </style>
</head>
<body style="width: fit-content; height:fit-content; background-color:black; overflow:hidden; transform-origin:0 0;">
    <audio src="./Addons/musics/rain.aac" autoplay loop id="rain-audio" style="visibility:hidden; transition:all 2s ease-out;"></audio>
    <audio src="./Addons/musics/bg-music-set-2.aac" style="visibility:hidden; transition:all 2s ease-out;" autoplay id="bg-audio" onended="
    audiopos++
    if(audiopos >= musicarray.length){audiopos = 0}
    document.getElementById('bg-audio').src = musicarray[audiopos]
    "></audio>
    <div class="drag" id="drag"></div>
    <iframe src="./menu.html" frameborder="0"></iframe>
</body>
<style>
    *{
        user-select: none; 
        margin: 0;
        border-color: transparent;
        padding: 0;
        border: 0;
        outline: 0;
        font-family: PixelifySans, sans-serif;
        width: 590px; height:700px; background-color:transparent; overflow:hidden;
        filter: grayscale(5%) sepia(10%);
    }

    .drag{
        -webkit-app-region: drag;
        background-color: transparent;
        position: absolute;
        z-index: 99;
        width: 100%;
        display: block;
        height:350px
    }

    .grayscale{
        filter: grayscale(80%);
        filter: sepia(10%);
    }
</style>

<script src="./Addons/Packages/JQuery 3.1.1/jquery-3.1.1.min.js"></script>
<script src="./Addons/Packages/Soundhandler/howler.min.js"></script>
<script>
    var reqres = {
        x: 592
    }

    var givenres = {
        x: window.innerWidth
    }


    setInterval(() => {
        var givenres = {
            x: window.innerWidth,
        }
        document.querySelector('body').style.transform = `scale(${givenres.x/reqres.x})`
    }, 10)
    var audiopos = 0
    var musicarray = [
    './Addons/musics/bg-music-set-2.aac',
    './Addons/musics/HARMONY.aac',
    './Addons/musics/SILENCE.aac',
    './Addons/musics/SMOOTH.aac',
    './Addons/musics/WATER-WALKING.aac'
    ]
    var audioenable = true;
    var select = new Howl({
        src: ['./Addons/musics/select.mp3'],
        volume: 0.6,
      });
    document.getElementById('bg-audio').volume = '0.1'
    document.getElementById('rain-audio').volume = '0.05'
    var data
    function redir(map, target){
        if(target === 1){
        data = map
        document.getElementById('drag').style.height = '250px'
        document.querySelector('iframe').src = './index.html'}
        else if(target === 2){
            document.getElementById('drag').style.height = '350px'
            document.querySelector('iframe').src = './menu.html'
        }
    }

    function musicswitch(Timeout){
       var bgaudio = document.getElementById('bg-audio')
       var rain = document.getElementById('rain-audio')
        if (audioenable) {  
            //relevant part to fading in audio
            bgaudio.volume = 0.1;
            $('#bg-audio').animate({volume: 0}, Timeout, () => {
                
            bgaudio.pause();
            });

            rain.volume = 0.05;
            $('#rain-audio').animate({volume: 0}, Timeout, () => {
                rain.pause();
            });
            
  
            audioenable = false;
        } else {
            //relevant part to fading out audio
            bgaudio.volume = 0;
            $('#bg-audio').animate({volume: 0.1}, 300);

            rain.volume = 0
            $('#rain-audio').animate({volume: 0.05}, 300);
            rain.play();
            bgaudio.play();
            audioenable = true;
        }
    }

    function stopProcess(){
        window.close()
    }

    function triggerSelect(){
        select.play()
    }

    function getData(){
        if(!data){
            data = 'Map 1'
        }
        return data
    }
</script>
</html>